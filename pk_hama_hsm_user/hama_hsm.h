/*=====================================================================================*/
/**
 * hama_hsm.h
 * author : puch
 * date : Oct 22 2015
 *
 * description : Any comments
 *
 */
/*=====================================================================================*/
#ifndef HAMA_HSM_H_
#define HAMA_HSM_H_
/*=====================================================================================*
 * Project Includes
 *=====================================================================================*/
#include "hama_hsm_types.h"
/*=====================================================================================* 
 * Standard Includes
 *=====================================================================================*/

/*=====================================================================================* 
 * Exported X-Macros
 *=====================================================================================*/
namespace hama
{
/*=====================================================================================* 
 * Exported Define Macros
 *=====================================================================================*/
#define HSM_STATE_MACHINE_DEF(_name, _handle, _statechart)             \
   static Hama_HSM_Handle_T HSM_Handle_##_name [] =                    \
   {                                                                   \
       _handle(HSM_STATE_HANDLER_DEF)                                  \
   };                                                                  \
   static Hama_HSM_Statechart_T HSM_Statechart_##_name [] =            \
   {                                                                   \
	   _statechart(HSM_STATECHART_DEF)                                  \
   };                                                                  \

#define HSM_STATECHART_DEF(_signal, _source, _guard, _handle, _target) \
{                                                                      \
   _source,                                                            \
   _signal,                                                            \
   _guard,                                                             \
   _handle,                                                            \
   _target                                                             \
},                                                                     \

#define HSM_STATE_HANDLER_DEF( _state, _super, _entry, _exit) \
{                                                             \
   _state,                                                    \
   _super,                                                    \
   _entry,                                                    \
   _exit                                                      \
},                                                            \


/*=====================================================================================* 
 * Exported Type Declarations
 *=====================================================================================*/

/*=====================================================================================* 
 * Exported Object Declarations
 *=====================================================================================*/

/*=====================================================================================* 
 * Exported Function Prototypes
 *=====================================================================================*/
extern void HSM_Init(Hama_HSM_State_T const initial_state, Hama_HSM_T& machine,
      Hama_HSM_Handle_T * statehandler, uint32_t const sizeof_statehandler,
      Hama_HSM_Statechart_T * statechart, uint32_t const sizeof_statechart);

extern void HSM_Dispatch(Hama_HSM_T& machine, Hama_HSM_Event_T const & hsm_ev);

/*=====================================================================================* 
 * Exported Function Like Macros
 *=====================================================================================*/

}
/*=====================================================================================* 
 * hama_hsm.h
 *=====================================================================================*
 * Log History
 *
 *=====================================================================================*/
#endif /*HAMA_HSM_H_*/
